{
  "hash": "b1c4f30b88c282cbe836a56ee174b69d",
  "result": {
    "markdown": "---\ntitle: \"ChatGPT as translator and text wizard\"\ndescription: |\n  A post showing how ChatGPT can be used to create structred data from text.\nimage: preview.png\nauthor:\n  - name: Jonathan Jayes\ndate: 2023-03-10\nexecute: \n  echo: true\n  warning: false\n  message: false\n---\n\n\n## Introduction\n\n:::: {.columns}\n\n::: {.column width=\"65%\"}\nData is the lifeblood of modern economic history. It courses through our models and charts the path of history. Yet data is often born unruly, its words jumbled and disorganized, its meaning buried under mountains of text. For the economic historian, this is an all too familiar challenge. We need to extract structure from chaos, to transform raw text into organized data that we can analyze.\n:::\n\n::: {.column width=\"5%\"}\n\n:::\n\n::: {.column width=\"30%\"}\n![An oil painting in the style of Franz Marc that depicts a handshake between a robot arm and a human arm](preview.png){width=80%}\n:::\n\n::::\n\nBut doing so by hand is a laborious and time-consuming task, one that demands hours of tedious work and a heightened attention to detail. Luckily, we live in an age of powerful AI tools, such as ChatGPT, that can help us wrangle our data and make sense of the world.\n\n## A typical problem\n\nI am interested in a source of Swedish biographical data called [*Vem är Vem?*](http://runeberg.org/vemarvem/sthlm45/0018.html) (or Who is Who?), part of Projekt Runeberg, a volunteer effort to create free electronic editions of classic Scandinavian literature. \n\nIn particular I am interested in the occupational trajectories of the individuals - what job titles do they hold through the course of their lives. By extracting information on the career paths of notable Swedes, we can gain insights into the labour market dynamics of Sweden and how they have evolved over time. With this structured data, economic historians can explore questions such as the influence of education and social networks on career trajectories, the impact of technological change on the labour market, and much more.\n\nCareful work by two librarians in Uppsala has resulted in a large selection of the source being scanned and digitized. Though the OCR engine is not perfect, the resulting text is largely legible. A typical example of the source is shown below.\n\n[The city librarian in Uppsala Paul Harnesk was the initiator and chief editor of the work Who is Who? which was published in two editions, each comprising five parts. He died in 1965 and the work was completed by the first librarian at Uppsala University Library, associate professor Åke Davidsson.]{.aside}\n\n![An example of the source, note the highlighted abbreviations wherein \"f.\" means \"född\" and \"Med. kand.\" means \"medicine kandidat\".**](images/source.pdf){width=100% height=650}\n\n## Planning\n\nExtracting occupational trajectories from the Swedish biographical source \"Vem är Vem?\" comprises a two-part process. The first part involves translating the Swedish text, which is full of abbreviations and contractions, into English using the natural language processing capabilities of ChatGPT. This step is crucial for making the data accessible and understandable to researchers who may not be familiar with Swedish (like myself!).\n\nOnce the text has been translated, the second part of the process demands structuring the data into year and occupation pairs. This involves identifying mentions of job titles and dates in the text and extracting them in a structured format. \n\n## ChatGPT as translator\n\nI simply ask ChatGPT:\n\n**Can you convert the following text from Swedish into English? There are many abbreviations, for instance, \"f.\" means \"född\" or born, \"Med. kand.\" means \"medicine kandidat\".**\n\n**It is a biography about a man:**\n\nAnd I paste in the OCR output:\n\n**Abramson, Ernst Leopold, professor, Djursholm, f. i Grava, Värml. L, 12/3 /96 av godsäg. Hugo A. o. Anna Salén. Med. kand. Sthlm 18, med. lic. o. dr 27, doc. i fysiol. 27, labor. i fysiol. 30-38, prof. o. förest, v. statrs inst. f. folkhälsan fr. 38. Batalj :läk. i f alt-läk rkår. res. 27, lär. i fysiol, o. rörel-sefysiol. v. gymn. centr anst. 22-30, led. av arméförv :s sjukv rstyr. vetensk. råd 36, medl. av riksidr rförb. öv rstyr. 24-36, skolidr :förb. läk. 28, led. av direkt, öv. gymn. centr :inst. 33, ordf. där 36, led. o. sekr. i näringsråd. 36, ordf. i 36 års livsmedelslagstiftn :-sakk. Utg. ett 50-tal arb. särsk. rör. näringsfysiol., fysiol, mek., muskel-fysiol. RNO.**\n\n![Screenshot of input](images/chatgpt_1.PNG)\n\nChatGPT returns to me the translated text, free from abbreviations and contractions:\n\n<blockquote>\n\nAbramson, Ernst Leopold, professor, Djursholm, born in Grava, Värmland, on March 12, 1896, to estate owner Hugo A. and Anna Salén. He obtained a medicine kandidat degree in Stockholm in 1918, followed by a medical licentiate and doctorate in 1927. He was a docent in physiology in 1927 and worked as a laboratory assistant in physiology from 1930 to 1938. From 1938, he was a professor and director at the State Institute for Public Health. He served as a battalion doctor and reserve officer from 1927 and was a teacher in physiology and movement physiology at the Gymnastics Central Institute from 1922 to 1930. He was a member of the Army Medical Corps and Reserve Force from 1924 to 1936, a member of the Scientific Council of the Army Medical Service from 1936, and a member of the School Management Association of Doctors from 1928. He was also a member of the Directorate of the Gymnastics Central Institute from 1933, its chairman from 1936, and a member and secretary of the Nutrition Council from 1936. In addition, he was the chairman of the 1936 Food Legislation Committee. He authored around 50 works, primarily related to nutrition physiology, physiology, mechanics, and muscle physiology. He was awarded the Royal Order of the North Star (RNO).\n\n</blockquote>\n\nIt surprises me that ChatGPT is able to extrapolate correctly from just \"**RNO**\" (an abbreviation of the Swedish *Nordstjärneorden*) in the final part of the description to:\n\n<blockquote>\n\nHe was awarded the Royal Order of the North Star (RNO).\n\n</blockquote>\n\nFantastic!\n\n![Screenshot of text output](images/chatgpt_2.PNG)\n\n\nNext I ask ChatGPT to return to us the occupational information in a structured format.\n\n## ChatGPT as interpreter\n\nStrucutred data is our goal. Again I use a simple instruction to ask:\n\n**Great, thank you, can you extract the occupations he held and the dates for which he held them, and return the output in an R tibble with a column for start year, a column for end year (if any), a column for the Swedish description of the occupation, and a column for the English translation.**\n\nIt returns the following R code:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\noccupations <- tibble(\n  start_year = c(1918, 1927, 1927, 1930, 1938, 1927, 1922, 1924, 1936, 1928, 1933, 1936),\n  end_year = c(NA, NA, NA, 1938, NA, 1936, 1930, 1936, NA, NA, NA, NA),\n  swedish_occupation = c(\n    \"Med. kand.\", \"Med. lic. o. dr\", \"Docent i fysiol.\", \"Labor. i fysiol.\",\n    \"Prof. o. förest, v. stats inst. f. folkhälsan\", \"Batalj :läk. i f alt-läk rkår.\",\n    \"Lär. i fysiol, o. rörel-sefysiol. v. gymn. centr anst.\", \"Led. av arméförv :s sjukv rstyr.\",\n    \"Medl. av riksidr rförb.\", \"Skolidr :förb. läk.\", \"Led. av direkt, öv. gymn. centr :inst.\",\n    \"Ordf. i 36 års livsmedelslagstiftn :-sakk.\"\n  ),\n  english_occupation = c(\n    \"Medicine kandidat\", \"Medical licentiate and doctorate\", \"Docent in physiology\",\n    \"Laboratory assistant in physiology\", \"Professor and director at the State Institute for Public Health\",\n    \"Battalion doctor and reserve officer\", \"Teacher in physiology and movement physiology at the Gymnastics Central Institute\",\n    \"Member of the Army Medical Corps and Reserve Force\", \"Member of the Scientific Council of the Army Medical Service\",\n    \"Member of the School Management Association of Doctors\", \"Member of the Directorate of the Gymnastics Central Institute\",\n    \"Chairman of the 1936 Food Legislation Committee.\"\n  )\n)\n```\n:::\n\n\n## Displaying the output\n\n### Table\n\nI can easily take this code and turn the output into a table with a hyperlink to the source:\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nlibrary(gt)\n\noccupations %>%\n  arrange(start_year) %>%\n  gt() %>%\n  tab_header(title = md(\"**Ernst Leopold Abramson's career trajectory**\")) %>%\n  cols_label(\n    start_year = md(\"Start\"),\n    end_year = md(\"End\"),\n    swedish_occupation = md(\"Swedish\"),\n    english_occupation = md(\"English\")\n  ) %>%\n  sub_missing(columns = end_year, missing_text = \"\") %>%\n  tab_spanner(md(\"**Duration**\"), columns = c(start_year, end_year)) %>%\n  tab_spanner(md(\"**Occupation**\"), columns = c(swedish_occupation, english_occupation)) %>%\n  tab_source_note(md(\"Data source: [Projekt Runeberg](http://runeberg.org/vemarvem/sthlm45/0018.html)\"))\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"ktvcdxvbpj\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>html {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#ktvcdxvbpj .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#ktvcdxvbpj .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ktvcdxvbpj .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#ktvcdxvbpj .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#ktvcdxvbpj .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#ktvcdxvbpj .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ktvcdxvbpj .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ktvcdxvbpj .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#ktvcdxvbpj .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#ktvcdxvbpj .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#ktvcdxvbpj .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#ktvcdxvbpj .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#ktvcdxvbpj .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#ktvcdxvbpj .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#ktvcdxvbpj .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#ktvcdxvbpj .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#ktvcdxvbpj .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#ktvcdxvbpj .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ktvcdxvbpj .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#ktvcdxvbpj .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#ktvcdxvbpj .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ktvcdxvbpj .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#ktvcdxvbpj .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#ktvcdxvbpj .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ktvcdxvbpj .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ktvcdxvbpj .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#ktvcdxvbpj .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#ktvcdxvbpj .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ktvcdxvbpj .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ktvcdxvbpj .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-left: 4px;\n  padding-right: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ktvcdxvbpj .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ktvcdxvbpj .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ktvcdxvbpj .gt_left {\n  text-align: left;\n}\n\n#ktvcdxvbpj .gt_center {\n  text-align: center;\n}\n\n#ktvcdxvbpj .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#ktvcdxvbpj .gt_font_normal {\n  font-weight: normal;\n}\n\n#ktvcdxvbpj .gt_font_bold {\n  font-weight: bold;\n}\n\n#ktvcdxvbpj .gt_font_italic {\n  font-style: italic;\n}\n\n#ktvcdxvbpj .gt_super {\n  font-size: 65%;\n}\n\n#ktvcdxvbpj .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 75%;\n  vertical-align: 0.4em;\n}\n\n#ktvcdxvbpj .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#ktvcdxvbpj .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#ktvcdxvbpj .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#ktvcdxvbpj .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#ktvcdxvbpj .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#ktvcdxvbpj .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\">\n  <thead class=\"gt_header\">\n    <tr>\n      <td colspan=\"4\" class=\"gt_heading gt_title gt_font_normal gt_bottom_border\" style><strong>Ernst Leopold Abramson's career trajectory</strong></td>\n    </tr>\n    \n  </thead>\n  <thead class=\"gt_col_headings\">\n    <tr>\n      <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"2\" scope=\"colgroup\" id=\"&lt;strong&gt;Duration&lt;/strong&gt;\">\n        <span class=\"gt_column_spanner\"><strong>Duration</strong></span>\n      </th>\n      <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"2\" scope=\"colgroup\" id=\"&lt;strong&gt;Occupation&lt;/strong&gt;\">\n        <span class=\"gt_column_spanner\"><strong>Occupation</strong></span>\n      </th>\n    </tr>\n    <tr>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Start\">Start</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"End\">End</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Swedish\">Swedish</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"English\">English</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"start_year\" class=\"gt_row gt_right\">1918</td>\n<td headers=\"end_year\" class=\"gt_row gt_right\"></td>\n<td headers=\"swedish_occupation\" class=\"gt_row gt_left\">Med. kand.</td>\n<td headers=\"english_occupation\" class=\"gt_row gt_left\">Medicine kandidat</td></tr>\n    <tr><td headers=\"start_year\" class=\"gt_row gt_right\">1922</td>\n<td headers=\"end_year\" class=\"gt_row gt_right\">1930</td>\n<td headers=\"swedish_occupation\" class=\"gt_row gt_left\">Lär. i fysiol, o. rörel-sefysiol. v. gymn. centr anst.</td>\n<td headers=\"english_occupation\" class=\"gt_row gt_left\">Teacher in physiology and movement physiology at the Gymnastics Central Institute</td></tr>\n    <tr><td headers=\"start_year\" class=\"gt_row gt_right\">1924</td>\n<td headers=\"end_year\" class=\"gt_row gt_right\">1936</td>\n<td headers=\"swedish_occupation\" class=\"gt_row gt_left\">Led. av arméförv :s sjukv rstyr.</td>\n<td headers=\"english_occupation\" class=\"gt_row gt_left\">Member of the Army Medical Corps and Reserve Force</td></tr>\n    <tr><td headers=\"start_year\" class=\"gt_row gt_right\">1927</td>\n<td headers=\"end_year\" class=\"gt_row gt_right\"></td>\n<td headers=\"swedish_occupation\" class=\"gt_row gt_left\">Med. lic. o. dr</td>\n<td headers=\"english_occupation\" class=\"gt_row gt_left\">Medical licentiate and doctorate</td></tr>\n    <tr><td headers=\"start_year\" class=\"gt_row gt_right\">1927</td>\n<td headers=\"end_year\" class=\"gt_row gt_right\"></td>\n<td headers=\"swedish_occupation\" class=\"gt_row gt_left\">Docent i fysiol.</td>\n<td headers=\"english_occupation\" class=\"gt_row gt_left\">Docent in physiology</td></tr>\n    <tr><td headers=\"start_year\" class=\"gt_row gt_right\">1927</td>\n<td headers=\"end_year\" class=\"gt_row gt_right\">1936</td>\n<td headers=\"swedish_occupation\" class=\"gt_row gt_left\">Batalj :läk. i f alt-läk rkår.</td>\n<td headers=\"english_occupation\" class=\"gt_row gt_left\">Battalion doctor and reserve officer</td></tr>\n    <tr><td headers=\"start_year\" class=\"gt_row gt_right\">1928</td>\n<td headers=\"end_year\" class=\"gt_row gt_right\"></td>\n<td headers=\"swedish_occupation\" class=\"gt_row gt_left\">Skolidr :förb. läk.</td>\n<td headers=\"english_occupation\" class=\"gt_row gt_left\">Member of the School Management Association of Doctors</td></tr>\n    <tr><td headers=\"start_year\" class=\"gt_row gt_right\">1930</td>\n<td headers=\"end_year\" class=\"gt_row gt_right\">1938</td>\n<td headers=\"swedish_occupation\" class=\"gt_row gt_left\">Labor. i fysiol.</td>\n<td headers=\"english_occupation\" class=\"gt_row gt_left\">Laboratory assistant in physiology</td></tr>\n    <tr><td headers=\"start_year\" class=\"gt_row gt_right\">1933</td>\n<td headers=\"end_year\" class=\"gt_row gt_right\"></td>\n<td headers=\"swedish_occupation\" class=\"gt_row gt_left\">Led. av direkt, öv. gymn. centr :inst.</td>\n<td headers=\"english_occupation\" class=\"gt_row gt_left\">Member of the Directorate of the Gymnastics Central Institute</td></tr>\n    <tr><td headers=\"start_year\" class=\"gt_row gt_right\">1936</td>\n<td headers=\"end_year\" class=\"gt_row gt_right\"></td>\n<td headers=\"swedish_occupation\" class=\"gt_row gt_left\">Medl. av riksidr rförb.</td>\n<td headers=\"english_occupation\" class=\"gt_row gt_left\">Member of the Scientific Council of the Army Medical Service</td></tr>\n    <tr><td headers=\"start_year\" class=\"gt_row gt_right\">1936</td>\n<td headers=\"end_year\" class=\"gt_row gt_right\"></td>\n<td headers=\"swedish_occupation\" class=\"gt_row gt_left\">Ordf. i 36 års livsmedelslagstiftn :-sakk.</td>\n<td headers=\"english_occupation\" class=\"gt_row gt_left\">Chairman of the 1936 Food Legislation Committee.</td></tr>\n    <tr><td headers=\"start_year\" class=\"gt_row gt_right\">1938</td>\n<td headers=\"end_year\" class=\"gt_row gt_right\"></td>\n<td headers=\"swedish_occupation\" class=\"gt_row gt_left\">Prof. o. förest, v. stats inst. f. folkhälsan</td>\n<td headers=\"english_occupation\" class=\"gt_row gt_left\">Professor and director at the State Institute for Public Health</td></tr>\n  </tbody>\n  <tfoot class=\"gt_sourcenotes\">\n    <tr>\n      <td class=\"gt_sourcenote\" colspan=\"4\">Data source: <a href=\"http://runeberg.org/vemarvem/sthlm45/0018.html\">Projekt Runeberg</a></td>\n    </tr>\n  </tfoot>\n  \n</table>\n</div>\n```\n:::\n:::\n\n::: {.cell}\n\n:::\n\n\n### Visualization\n\nAnd we can take the output and make it into a nice figure that visualizes Ernst's career trajectory.\n\n\n::: {.cell .column-page}\n\n```{.r .cell-code  code-fold=\"true\"}\noccupations %>%\n  arrange(start_year) %>%\n  mutate(end_year_imputed = case_when(\n    is.na(end_year) ~ lead(start_year),\n    is.na(lead(start_year)) ~ start_year,\n    TRUE ~ end_year\n  )) %>%\n  mutate(\n    english_occupation = str_squish(str_remove_all(english_occupation, \"[:punct:]\")),\n    english_occupation = fct_reorder(english_occupation, start_year, .desc = TRUE)\n  ) %>%\n  # pivot_longer(c(start_year, end_year_imputed)) %>%\n  # ggplot(aes(value, english_occupation, colour = name)) +\n  ggplot(aes(xmin = start_year, xmax = end_year_imputed, y = english_occupation)) +\n  geom_linerange(colour = \"gray50\", size = 2) +\n  geom_point(aes(x = end_year_imputed), colour = \"#be5d2b\", size = 4) +\n  geom_point(aes(x = start_year), colour = \"#2B8CBE\", size = 4) +\n  labs(\n    title = \"Ernst Leopold Abramson's career trajectory\",\n    subtitle = \"Showing <span style = 'color:#2B8CBE;'>start dates</span> and <span style = 'color:#be5d2b;'>end dates</span> for his various roles\",\n    x = NULL,\n    y = NULL\n  ) +\n  theme(\n    legend.position = \"none\",\n    plot.subtitle = element_markdown(),\n    plot.title.position = \"plot\",\n    text = element_text(family = \"ibm\", size = 28)\n  )\n```\n\n::: {.cell-output-display}\n![](chatgpt-as-translator_files/figure-html/unnamed-chunk-4-1.png){width=1152}\n:::\n:::\n\n::: {.cell}\n\n:::\n\n\n## Conclusion\n\nThank you for reading along. I have demonstrated how we can use unstructured text data to reconstruct career trajectories for notable Swedes, translating and structuring the biographical text data through the ChatGPT web interface. \n\nNext week I'll share a post on how to take this process and scale it by leveraging OpenAI's API.\n\nI hope that it might prove useful in your own research!\n",
    "supporting": [
      "chatgpt-as-translator_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}