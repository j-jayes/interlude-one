<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jonathan Jayes">
<meta name="dcterms.date" content="2023-07-05">
<meta name="description" content="A post about automating the data retrieval process from PDF documents using LangChain and the OpenAI API.">

<title>Transforming National Budget Documents into Queryable Knowledge – Interlude One</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../assets/favicon.ico" rel="icon">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../../site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="../../site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="../../site_libs/quarto-diagram/mermaid.css" rel="stylesheet">
<script src="../../site_libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="../../site_libs/d3-bundle-5.16.0/d3-bundle.min.js"></script>
<script src="../../site_libs/d3-lasso-0.0.5/d3-lasso.min.js"></script>
<script src="../../site_libs/save-svg-as-png-1.4.17/save-svg-as-png.min.js"></script>
<script src="../../site_libs/flatbush-4.4.0/flatbush.min.js"></script>
<link href="../../site_libs/ggiraphjs-0.8.10/ggiraphjs.min.css" rel="stylesheet">
<script src="../../site_libs/ggiraphjs-0.8.10/ggiraphjs.min.js"></script>
<script src="../../site_libs/girafe-binding-0.8.12/girafe.js"></script>
<script data-goatcounter="https://j0nathan.goatcounter.com/count" async="" src="//gc.zgo.at/count.js"></script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../assets/favicon_logo.ico" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Interlude One</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../content/phd-planning.html"> 
<span class="menu-text">PhD planning</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../content/teaching.html"> 
<span class="menu-text">Teaching</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../content/research.html"> 
<span class="menu-text">Research</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../content/publications.html"> 
<span class="menu-text">Publications</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../content/data.html"> 
<span class="menu-text">Data</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-web-apps" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Web Apps</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-web-apps">    
        <li>
    <a class="dropdown-item" href="http://jonathan-jayes.shinyapps.io/gumtree-price-explorer">
 <span class="dropdown-text">Second Hand Car Price Comparison Tool</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/j-jayes/production-functions">
 <span class="dropdown-text">Production Functions Shiny App</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/j-jayes/NBER-methods">
 <span class="dropdown-text">Economics literature explorer</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/j-jayes/Roses-Wolf-database-on-regional-GDP">
 <span class="dropdown-text">Europe’s Regional Development Explorer</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-fun-stuff" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Fun stuff</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-fun-stuff">    
        <li>
    <a class="dropdown-item" href="https://j-jayes.github.io/recipes/">
 <span class="dropdown-text">My personal cookbook</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/generative-ai-articles-listing.html">
 <span class="dropdown-text">Generative AI reports</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/j-jayes/interlude-one"> 
<span class="menu-text"><i class="fa-brands fa-github" aria-label="github"></i></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#the-challenge" id="toc-the-challenge" class="nav-link active" data-scroll-target="#the-challenge">The challenge</a></li>
  <li><a href="#the-solution-a-vector-database-and-a-large-language-model" id="toc-the-solution-a-vector-database-and-a-large-language-model" class="nav-link" data-scroll-target="#the-solution-a-vector-database-and-a-large-language-model">The solution: a vector database and a Large Language Model</a></li>
  <li><a href="#an-example-what-was-consumer-price-inflation-in-2022" id="toc-an-example-what-was-consumer-price-inflation-in-2022" class="nav-link" data-scroll-target="#an-example-what-was-consumer-price-inflation-in-2022">An example: what was Consumer Price Inflation in 2022?</a></li>
  <li><a href="#what-is-going-on-in-the-background" id="toc-what-is-going-on-in-the-background" class="nav-link" data-scroll-target="#what-is-going-on-in-the-background">What is going on in the background?</a></li>
  <li><a href="#visualising-the-data" id="toc-visualising-the-data" class="nav-link" data-scroll-target="#visualising-the-data">Visualising the data</a></li>
  <li><a href="#what-do-we-learn" id="toc-what-do-we-learn" class="nav-link" data-scroll-target="#what-do-we-learn">What do we learn?</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Transforming National Budget Documents into Queryable Knowledge</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>

<div>
  <div class="description">
    <p>A post about automating the data retrieval process from PDF documents using LangChain and the OpenAI API.</p>
  </div>
</div>


<div class="quarto-title-meta column-body">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jonathan Jayes </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">July 5, 2023</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="the-challenge" class="level2">
<h2 class="anchored" data-anchor-id="the-challenge">The challenge</h2>
<p>One of the claims of generative AI is that it will free humans from labourious tasks which are currently tedious to do manually and challenging to automate. In this article, we’ll explore how we can use <a href="https://python.langchain.com/docs/get_started/introduction.html">LangChain</a> to automate the process of extracting information from PDF documents.</p>
<p>The National Treasury in South Africa produces a fantastically informative budget review each year. It includes headline figures like GDP growth, inflation, revenue and expenditure, as well as more detailed information about the budget for each government department. In addition, the budget speech is delivered by the Minister of Finance, and contains a wealth of information about the budget, including the government’s priorities for the year, and the reasoning behind the budget allocations.</p>
<p>If we want to get specific information from these documents, we can read through them and extract the information manually, searching for specific terms with the <code>control + F</code> functionality. This is a time consuming process, and it’s easy to make mistakes. What if we could ask a computer to do it for us?</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>There are, in addition to the PDF documents a series of excel files that National Treasury releases too. These files do contain the information that we want, but are not in an easily machine readable format.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> Useful tools like <a href="https://codera.co.za/econdata/">EconData</a> from <a href="https://codera.co.za/">Codera Analytics</a> make it much easier to access this data programatically.</p>
</div>
</div>
</section>
<section id="the-solution-a-vector-database-and-a-large-language-model" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="the-solution-a-vector-database-and-a-large-language-model">The solution: a vector database and a Large Language Model</h2>
<p>LangChain is a framework that allows us to connect a large language model to our own data. In this case, it allows to transform the South African National Budget Reviews and Budget Speeches into an interactive, queryable knowledge base. The final output in this case is a table of summary statistics that would have taken a human hours to compile, but which we can now generate in seconds.</p>
<p>In essence, to transform budget documents into a queryable database, we read in the PDFs, segment them into chunks, and store the text in a database. To query this database, we use a simple similarity calculation to find the most relevant chunks of text, which are then fed to a large language model to answer our questions.</p>
<p>Here is a diagram of the process:</p>
<div class="column-page">
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">graph LR
    A((Budget Documents PDF)) --&gt;|Chunking&lt;br&gt;Vectorization| B{Chroma DB}
    C[User Query] --&gt;|Vectorization| D{Chroma DB}
    D --&gt; E[Top-n Similar Chunks]
    E --&gt; F{Large Language &lt;br&gt;Model Context Window}
    F --&gt; G((Answer))
    style A fill:#ece7f2,stroke:#333,stroke-width:2px
    style B fill:#a6bddb,stroke:#333,stroke-width:2px
    style C fill:#ece7f2,stroke:#333,stroke-width:2px
    style D fill:#a6bddb,stroke:#333,stroke-width:2px
    style E fill:#2b8cbe,stroke:#333,stroke-width:2px
    style F fill:#a6bddb,stroke:#333,stroke-width:2px
    style G fill:#2b8cbe,stroke:#333,stroke-width:2px

</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</div>
</section>
<section id="an-example-what-was-consumer-price-inflation-in-2022" class="level2">
<h2 class="anchored" data-anchor-id="an-example-what-was-consumer-price-inflation-in-2022">An example: what was Consumer Price Inflation in 2022?</h2>
<p>Say for instance that we want to know what Consumer Price Inflation was in 2022 in South Africa. We can ask the question in a natural language query, and the system will return the answer. Here is the query and the answer, along with the source documents that the system used to answer the question:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 7%">
<col style="width: 1%">
<col style="width: 90%">
</colgroup>
<thead>
<tr class="header">
<th>Query</th>
<th>Result</th>
<th>Source documents</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>What was Consumer Price Index inflation in 2022?</td>
<td>6.9%</td>
<td>Document(page_content=to moderate in 2023, before rising gradually over the medium term . inflation peaked in the third quarter and averaged 6.9 per cent during 2022 . is projected is estimated to ease to 5.3 per cent in 2023. Global crude oil and food prices remain sources of inflationary pressure. Electricity prices have been up by 4.6 per cent over the medium term compared to the 2022 MTBPS and are’, metadata={‘source’: ‘c:\Users\User\Documents\Recon\langchain-budget-speech-demo\budget-documents\budget-review-2023.pdf’, ‘page’: 39}),</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td>Document(page_content=‘CHAPTER 1 NAVIGATING AN UNEVEN ECONOMIC RECOVERY Real percentage growth 2022 2023 2024 2025 Estimate Forecast Household consumption 2.8 1.0 1.5 1.8 Gross fixed-capital formation 4.2 1.3 3.8 3.5 Exports 8.8 1.0 2.2 2.9 Imports 14.0 1.1 2.3 2.9 Real GDP growth 2.5 0.9 1.5 1.8 Consumer price index (CPI) inflation 6.9 5.3 4.9 4.7 Current account balance (% of GDP) -0.4 -1.8 -2.0 -2.1’, metadata={‘source’: ‘c:\Users\User\Documents\Recon\langchain-budget-speech-demo\budget-documents\budget-review-2023.pdf’, ‘page’: 27}),</td>
</tr>
</tbody>
</table>
<p>In the table above, we can see two of the chunks of text that are most similar in terms of content to our query, from the ChromaDB database that contains the 2023 Budget Review and Budget Speech broken into 2000 token chunks. The first chunk in our table is from page 39 of the budget review, and the second chunk is from page 27. Both of these chunks contain the information that we are looking for, and the system has correctly identified them as the most relevant chunks.</p>
<p>These chunks are then passed to the OpenAI GPT-3.5 large language model, which is able to take in the question and the context, and then return to us the answer. In this case, the answer is 6.9%, which is correct, as we can see in the table from the budget review below (which is the same as the second source document in the markdown table above).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="macro_outlook.png" class="img-fluid figure-img"></p>
<figcaption>Screenshot of table from 2023 Budget Review</figcaption>
</figure>
</div>
</section>
<section id="what-is-going-on-in-the-background" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="what-is-going-on-in-the-background">What is going on in the background?</h2>
<p>You can have a look at my <a href="https://github.com/j-jayes/langchain-budget-speech-demo/blob/main/langchain-budget-documents-demo.ipynb">GitHub repository</a> for the full code, but I’ll walk through the main steps here.</p>
<ol type="1">
<li><strong>Set Up:</strong> The first step is to set up LangChain using an OpenAI key. This example uses OpenAI for both the language model and the embeddings.</li>
<li><strong>Load Documents:</strong> LangChain can load multiple documents at once. In this example, PDF files containing the 2023 budget review and 2023 budget speech are loaded.</li>
<li><strong>Split Data:</strong> The data is then split into chunks. Each chunk corresponds to a portion of information from a specific page of the budget documents.</li>
<li><strong>Create a Database:</strong> A vector store database is created to store and index the document embeddings, which are vector representations of the text chunks. The embeddings are generated using OpenAI and stored in a database using a tool named ChromaDB.</li>
<li><strong>Retrieve Relevant Documents:</strong> A retriever is then set up to query the vector database and return relevant documents. The number of documents returned can be adjusted according to the user’s needs. In this case, I used fewer chunks with larger number of tokens per chunk compared to the default as it worked best.</li>
<li><strong>Language Model Chain:</strong> After setting up the retriever, a retrieval-question-answering chain is created using OpenAI. This chain is capable of answering queries based on the contents of the chunks that are passed to it, depending on the words in the query.</li>
<li><strong>Format Output:</strong> A function is created to present the results and source documents neatly. This is what we show in the markdown table above.</li>
<li><strong>Querying:</strong> The system is now ready for queries. A query is input and the system returns the most relevant response based on the indexed documents. In this case, we worked through each years’ budget documents from 2010 to 2022 to find values for seven data series.</li>
</ol>
<p>Have a look at the output in the table below.</p>
<div class="cell page-columns page-full">
<div class="cell-output-display column-page">
<div id="nmkmsipmww" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#nmkmsipmww table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#nmkmsipmww thead, #nmkmsipmww tbody, #nmkmsipmww tfoot, #nmkmsipmww tr, #nmkmsipmww td, #nmkmsipmww th {
  border-style: none;
}

#nmkmsipmww p {
  margin: 0;
  padding: 0;
}

#nmkmsipmww .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#nmkmsipmww .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#nmkmsipmww .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#nmkmsipmww .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#nmkmsipmww .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nmkmsipmww .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nmkmsipmww .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nmkmsipmww .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#nmkmsipmww .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#nmkmsipmww .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#nmkmsipmww .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#nmkmsipmww .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#nmkmsipmww .gt_spanner_row {
  border-bottom-style: hidden;
}

#nmkmsipmww .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#nmkmsipmww .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#nmkmsipmww .gt_from_md > :first-child {
  margin-top: 0;
}

#nmkmsipmww .gt_from_md > :last-child {
  margin-bottom: 0;
}

#nmkmsipmww .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#nmkmsipmww .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#nmkmsipmww .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#nmkmsipmww .gt_row_group_first td {
  border-top-width: 2px;
}

#nmkmsipmww .gt_row_group_first th {
  border-top-width: 2px;
}

#nmkmsipmww .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nmkmsipmww .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#nmkmsipmww .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#nmkmsipmww .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nmkmsipmww .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nmkmsipmww .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#nmkmsipmww .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#nmkmsipmww .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#nmkmsipmww .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nmkmsipmww .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nmkmsipmww .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nmkmsipmww .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nmkmsipmww .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nmkmsipmww .gt_left {
  text-align: left;
}

#nmkmsipmww .gt_center {
  text-align: center;
}

#nmkmsipmww .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#nmkmsipmww .gt_font_normal {
  font-weight: normal;
}

#nmkmsipmww .gt_font_bold {
  font-weight: bold;
}

#nmkmsipmww .gt_font_italic {
  font-style: italic;
}

#nmkmsipmww .gt_super {
  font-size: 65%;
}

#nmkmsipmww .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#nmkmsipmww .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#nmkmsipmww .gt_indent_1 {
  text-indent: 5px;
}

#nmkmsipmww .gt_indent_2 {
  text-indent: 10px;
}

#nmkmsipmww .gt_indent_3 {
  text-indent: 15px;
}

#nmkmsipmww .gt_indent_4 {
  text-indent: 20px;
}

#nmkmsipmww .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<colgroup>
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header gt_heading">
<th colspan="14" class="gt_heading gt_title gt_font_normal gt_bottom_border">Selected series from Budget Reviews and Budget Speeches (2010-2022)</th>
</tr>
<tr class="odd gt_col_headings">
<th id="Key" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Key</th>
<th id="2010" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">2010</th>
<th id="2011" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">2011</th>
<th id="2012" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">2012</th>
<th id="2013" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">2013</th>
<th id="2014" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">2014</th>
<th id="2015" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">2015</th>
<th id="2016" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">2016</th>
<th id="2017" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">2017</th>
<th id="2018" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">2018</th>
<th id="2019" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">2019</th>
<th id="2020" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">2020</th>
<th id="2021" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">2021</th>
<th id="2022" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">2022</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Key">Budget balance (% of GDP)</td>
<td class="gt_row gt_right" headers="2010">-5.30</td>
<td class="gt_row gt_right" headers="2011">-4.80</td>
<td class="gt_row gt_right" headers="2012">5.2</td>
<td class="gt_row gt_right" headers="2013">-4.00</td>
<td class="gt_row gt_right" headers="2014">-3.9</td>
<td class="gt_row gt_right" headers="2015">-3.9</td>
<td class="gt_row gt_right" headers="2016">-3.40</td>
<td class="gt_row gt_right" headers="2017">-4.30</td>
<td class="gt_row gt_right" headers="2018">-3.70</td>
<td class="gt_row gt_right" headers="2019">-6.30</td>
<td class="gt_row gt_right" headers="2020">-14.00</td>
<td class="gt_row gt_right" headers="2021">-5.70</td>
<td class="gt_row gt_right" headers="2022">-4.2</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Key">GDP (current ZAR[billions])</td>
<td class="gt_row gt_right" headers="2010">2.67</td>
<td class="gt_row gt_right" headers="2011">2.94</td>
<td class="gt_row gt_right" headers="2012"><br>
</td>
<td class="gt_row gt_right" headers="2013">3.39</td>
<td class="gt_row gt_right" headers="2014">3.8</td>
<td class="gt_row gt_right" headers="2015"><br>
</td>
<td class="gt_row gt_right" headers="2016">4.32</td>
<td class="gt_row gt_right" headers="2017"><br>
</td>
<td class="gt_row gt_right" headers="2018">4.96</td>
<td class="gt_row gt_right" headers="2019">5.09</td>
<td class="gt_row gt_right" headers="2020">4.93</td>
<td class="gt_row gt_right" headers="2021">6.17</td>
<td class="gt_row gt_right" headers="2022">6.6</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Key">GDP growth (%)</td>
<td class="gt_row gt_right" headers="2010">3.40</td>
<td class="gt_row gt_right" headers="2011">3.10</td>
<td class="gt_row gt_right" headers="2012">2.5</td>
<td class="gt_row gt_right" headers="2013">1.80</td>
<td class="gt_row gt_right" headers="2014">1.4</td>
<td class="gt_row gt_right" headers="2015">1.3</td>
<td class="gt_row gt_right" headers="2016">0.50</td>
<td class="gt_row gt_right" headers="2017">0.01</td>
<td class="gt_row gt_right" headers="2018">0.70</td>
<td class="gt_row gt_right" headers="2019">0.30</td>
<td class="gt_row gt_right" headers="2020">-7.20</td>
<td class="gt_row gt_right" headers="2021">4.80</td>
<td class="gt_row gt_right" headers="2022">2.5</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Key">General government debt (% of GDP)</td>
<td class="gt_row gt_right" headers="2010">25.70</td>
<td class="gt_row gt_right" headers="2011">33.50</td>
<td class="gt_row gt_right" headers="2012">41.8</td>
<td class="gt_row gt_right" headers="2013">34.90</td>
<td class="gt_row gt_right" headers="2014">40.8</td>
<td class="gt_row gt_right" headers="2015">44.8</td>
<td class="gt_row gt_right" headers="2016">45.70</td>
<td class="gt_row gt_right" headers="2017">53.30</td>
<td class="gt_row gt_right" headers="2018">55.60</td>
<td class="gt_row gt_right" headers="2019">61.60</td>
<td class="gt_row gt_right" headers="2020">80.30</td>
<td class="gt_row gt_right" headers="2021">69.50</td>
<td class="gt_row gt_right" headers="2022">71.1</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Key">General government expenditure (% of GDP)</td>
<td class="gt_row gt_right" headers="2010">30.80</td>
<td class="gt_row gt_right" headers="2011">32.60</td>
<td class="gt_row gt_right" headers="2012">32.9</td>
<td class="gt_row gt_right" headers="2013">33.20</td>
<td class="gt_row gt_right" headers="2014">32.0</td>
<td class="gt_row gt_right" headers="2015">33.9</td>
<td class="gt_row gt_right" headers="2016">32.80</td>
<td class="gt_row gt_right" headers="2017">33.20</td>
<td class="gt_row gt_right" headers="2018">32.90</td>
<td class="gt_row gt_right" headers="2019">29.40</td>
<td class="gt_row gt_right" headers="2020">41.70</td>
<td class="gt_row gt_right" headers="2021">33.20</td>
<td class="gt_row gt_right" headers="2022">32.6</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Key">General government revenue (% of GDP)</td>
<td class="gt_row gt_right" headers="2010">28.30</td>
<td class="gt_row gt_right" headers="2011">27.70</td>
<td class="gt_row gt_right" headers="2012">27.7</td>
<td class="gt_row gt_right" headers="2013">29.20</td>
<td class="gt_row gt_right" headers="2014">28.1</td>
<td class="gt_row gt_right" headers="2015">30.0</td>
<td class="gt_row gt_right" headers="2016">29.40</td>
<td class="gt_row gt_right" headers="2017">28.80</td>
<td class="gt_row gt_right" headers="2018">28.80</td>
<td class="gt_row gt_right" headers="2019">29.40</td>
<td class="gt_row gt_right" headers="2020">27.70</td>
<td class="gt_row gt_right" headers="2021">27.50</td>
<td class="gt_row gt_right" headers="2022">28.5</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Key">Inflation (CPI) (%)</td>
<td class="gt_row gt_right" headers="2010">4.30</td>
<td class="gt_row gt_right" headers="2011">5.00</td>
<td class="gt_row gt_right" headers="2012">5.4</td>
<td class="gt_row gt_right" headers="2013">5.70</td>
<td class="gt_row gt_right" headers="2014">5.3</td>
<td class="gt_row gt_right" headers="2015">4.6</td>
<td class="gt_row gt_right" headers="2016">6.40</td>
<td class="gt_row gt_right" headers="2017">5.30</td>
<td class="gt_row gt_right" headers="2018">4.70</td>
<td class="gt_row gt_right" headers="2019">4.10</td>
<td class="gt_row gt_right" headers="2020">3.30</td>
<td class="gt_row gt_right" headers="2021">4.80</td>
<td class="gt_row gt_right" headers="2022">6.9</td>
</tr>
</tbody><tfoot class="gt_sourcenotes">
<tr class="odd">
<td colspan="14" class="gt_sourcenote">Source: National Treasury of South Africa</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
</section>
<section id="visualising-the-data" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="visualising-the-data">Visualising the data</h2>
<p>We can also make a plot of our selected series. Mouse over the points to see the exact values.</p>
<div class="column-page">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="girafe html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-a23deaa7e075564df25e" style="width:100%;height:325px;"></div>
<script type="application/json" data-for="htmlwidget-a23deaa7e075564df25e">{"x":{"html":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' class='ggiraph-svg' role='graphics-document' id='svg_70075c25_6441_4bc7_824f_8c4540654091' viewBox='0 0 864 432'>\n <defs id='svg_70075c25_6441_4bc7_824f_8c4540654091_defs'>\n  <clipPath id='svg_70075c25_6441_4bc7_824f_8c4540654091_c1'>\n   <rect x='0' y='0' width='864' height='432'/>\n  <\/clipPath>\n  <clipPath id='svg_70075c25_6441_4bc7_824f_8c4540654091_c2'>\n   <rect x='28.02' y='39.14' width='830.5' height='298.5'/>\n  <\/clipPath>\n <\/defs>\n <g id='svg_70075c25_6441_4bc7_824f_8c4540654091_rootg' class='ggiraph-svg-rootg'>\n  <g clip-path='url(#svg_70075c25_6441_4bc7_824f_8c4540654091_c1)'>\n   <rect x='0' y='0' width='864' height='432' fill='#FFFFFF' fill-opacity='1' stroke='#FFFFFF' stroke-opacity='1' stroke-width='0.75' stroke-linejoin='round' stroke-linecap='round' class='ggiraph-svg-bg'/>\n   <rect x='0' y='0' width='864' height='432' fill='#FFFFFF' fill-opacity='1' stroke='#FFFFFF' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='round'/>\n  <\/g>\n  <g clip-path='url(#svg_70075c25_6441_4bc7_824f_8c4540654091_c2)'>\n   <rect x='28.02' y='39.14' width='830.5' height='298.5' fill='#FFFFFF' fill-opacity='1' stroke='none'/>\n   <polyline points='28.02,312.56 858.52,312.56' fill='none' stroke='#DEDEDE' stroke-opacity='1' stroke-width='0.27' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='28.02,255.00 858.52,255.00' fill='none' stroke='#DEDEDE' stroke-opacity='1' stroke-width='0.27' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='28.02,197.45 858.52,197.45' fill='none' stroke='#DEDEDE' stroke-opacity='1' stroke-width='0.27' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='28.02,139.90 858.52,139.90' fill='none' stroke='#DEDEDE' stroke-opacity='1' stroke-width='0.27' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='28.02,82.35 858.52,82.35' fill='none' stroke='#DEDEDE' stroke-opacity='1' stroke-width='0.27' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='28.02,283.78 858.52,283.78' fill='none' stroke='#DEDEDE' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='28.02,226.23 858.52,226.23' fill='none' stroke='#DEDEDE' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='28.02,168.68 858.52,168.68' fill='none' stroke='#DEDEDE' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='28.02,111.12 858.52,111.12' fill='none' stroke='#DEDEDE' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='28.02,53.57 858.52,53.57' fill='none' stroke='#DEDEDE' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='65.77,337.64 65.77,39.14' fill='none' stroke='#DEDEDE' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='128.69,337.64 128.69,39.14' fill='none' stroke='#DEDEDE' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='191.61,337.64 191.61,39.14' fill='none' stroke='#DEDEDE' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='254.52,337.64 254.52,39.14' fill='none' stroke='#DEDEDE' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='317.44,337.64 317.44,39.14' fill='none' stroke='#DEDEDE' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='380.35,337.64 380.35,39.14' fill='none' stroke='#DEDEDE' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='443.27,337.64 443.27,39.14' fill='none' stroke='#DEDEDE' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='506.19,337.64 506.19,39.14' fill='none' stroke='#DEDEDE' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='569.10,337.64 569.10,39.14' fill='none' stroke='#DEDEDE' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='632.02,337.64 632.02,39.14' fill='none' stroke='#DEDEDE' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='694.94,337.64 694.94,39.14' fill='none' stroke='#DEDEDE' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='757.85,337.64 757.85,39.14' fill='none' stroke='#DEDEDE' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='820.77,337.64 820.77,39.14' fill='none' stroke='#DEDEDE' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <line x1='28.02' y1='283.78' x2='858.52' y2='283.78' stroke='#BEBEBE' stroke-opacity='1' stroke-width='4.27' stroke-dasharray='20,20' stroke-linejoin='round' stroke-linecap='butt'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e1' cx='65.77' cy='299.03' r='2.67pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='Budget balance (% of GDP) in 2010 was -5.3'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e2' cx='128.69' cy='297.59' r='2.67pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='Budget balance (% of GDP) in 2011 was -4.8'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e3' cx='191.61' cy='268.82' r='2.67pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='Budget balance (% of GDP) in 2012 was 5.2'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e4' cx='254.52' cy='295.29' r='2.67pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='Budget balance (% of GDP) in 2013 was -4'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e5' cx='317.44' cy='295' r='2.67pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='Budget balance (% of GDP) in 2014 was -3.9'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e6' cx='380.35' cy='295' r='2.67pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='Budget balance (% of GDP) in 2015 was -3.9'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e7' cx='443.27' cy='293.56' r='2.67pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='Budget balance (% of GDP) in 2016 was -3.4'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e8' cx='506.19' cy='296.15' r='2.67pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='Budget balance (% of GDP) in 2017 was -4.3'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e9' cx='569.1' cy='294.43' r='2.67pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='Budget balance (% of GDP) in 2018 was -3.7'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e10' cx='632.02' cy='301.91' r='2.67pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='Budget balance (% of GDP) in 2019 was -6.3'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e11' cx='694.94' cy='324.07' r='2.67pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='Budget balance (% of GDP) in 2020 was -14'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e12' cx='757.85' cy='300.18' r='2.67pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='Budget balance (% of GDP) in 2021 was -5.7'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e13' cx='820.77' cy='295.87' r='2.67pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='Budget balance (% of GDP) in 2022 was -4.2'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e14' cx='65.77' cy='274' r='2.67pt' fill='#B79F00' fill-opacity='1' stroke='#B79F00' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='GDP growth (%) in 2010 was 3.4'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e15' cx='128.69' cy='274.86' r='2.67pt' fill='#B79F00' fill-opacity='1' stroke='#B79F00' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='GDP growth (%) in 2011 was 3.1'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e16' cx='191.61' cy='276.59' r='2.67pt' fill='#B79F00' fill-opacity='1' stroke='#B79F00' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='GDP growth (%) in 2012 was 2.5'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e17' cx='254.52' cy='278.6' r='2.67pt' fill='#B79F00' fill-opacity='1' stroke='#B79F00' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='GDP growth (%) in 2013 was 1.8'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e18' cx='317.44' cy='279.75' r='2.67pt' fill='#B79F00' fill-opacity='1' stroke='#B79F00' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='GDP growth (%) in 2014 was 1.4'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e19' cx='380.35' cy='280.04' r='2.67pt' fill='#B79F00' fill-opacity='1' stroke='#B79F00' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='GDP growth (%) in 2015 was 1.3'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e20' cx='443.27' cy='282.34' r='2.67pt' fill='#B79F00' fill-opacity='1' stroke='#B79F00' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='GDP growth (%) in 2016 was 0.5'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e21' cx='506.19' cy='283.75' r='2.67pt' fill='#B79F00' fill-opacity='1' stroke='#B79F00' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='GDP growth (%) in 2017 was 0.01'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e22' cx='569.1' cy='281.77' r='2.67pt' fill='#B79F00' fill-opacity='1' stroke='#B79F00' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='GDP growth (%) in 2018 was 0.7'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e23' cx='632.02' cy='282.92' r='2.67pt' fill='#B79F00' fill-opacity='1' stroke='#B79F00' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='GDP growth (%) in 2019 was 0.3'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e24' cx='694.94' cy='304.5' r='2.67pt' fill='#B79F00' fill-opacity='1' stroke='#B79F00' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='GDP growth (%) in 2020 was -7.2'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e25' cx='757.85' cy='269.97' r='2.67pt' fill='#B79F00' fill-opacity='1' stroke='#B79F00' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='GDP growth (%) in 2021 was 4.8'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e26' cx='820.77' cy='276.59' r='2.67pt' fill='#B79F00' fill-opacity='1' stroke='#B79F00' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='GDP growth (%) in 2022 was 2.5'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e27' cx='65.77' cy='209.83' r='2.67pt' fill='#F564E3' fill-opacity='1' stroke='#F564E3' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government debt (% of GDP) in 2010 was 25.7'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e28' cx='128.69' cy='187.38' r='2.67pt' fill='#F564E3' fill-opacity='1' stroke='#F564E3' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government debt (% of GDP) in 2011 was 33.5'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e29' cx='191.61' cy='163.5' r='2.67pt' fill='#F564E3' fill-opacity='1' stroke='#F564E3' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government debt (% of GDP) in 2012 was 41.8'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e30' cx='254.52' cy='183.35' r='2.67pt' fill='#F564E3' fill-opacity='1' stroke='#F564E3' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government debt (% of GDP) in 2013 was 34.9'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e31' cx='317.44' cy='166.37' r='2.67pt' fill='#F564E3' fill-opacity='1' stroke='#F564E3' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government debt (% of GDP) in 2014 was 40.8'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e32' cx='380.35' cy='154.86' r='2.67pt' fill='#F564E3' fill-opacity='1' stroke='#F564E3' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government debt (% of GDP) in 2015 was 44.8'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e33' cx='443.27' cy='152.27' r='2.67pt' fill='#F564E3' fill-opacity='1' stroke='#F564E3' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government debt (% of GDP) in 2016 was 45.7'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e34' cx='506.19' cy='130.4' r='2.67pt' fill='#F564E3' fill-opacity='1' stroke='#F564E3' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government debt (% of GDP) in 2017 was 53.3'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e35' cx='569.1' cy='123.79' r='2.67pt' fill='#F564E3' fill-opacity='1' stroke='#F564E3' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government debt (% of GDP) in 2018 was 55.6'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e36' cx='632.02' cy='106.52' r='2.67pt' fill='#F564E3' fill-opacity='1' stroke='#F564E3' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government debt (% of GDP) in 2019 was 61.6'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e37' cx='694.94' cy='52.71' r='2.67pt' fill='#F564E3' fill-opacity='1' stroke='#F564E3' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government debt (% of GDP) in 2020 was 80.3'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e38' cx='757.85' cy='83.79' r='2.67pt' fill='#F564E3' fill-opacity='1' stroke='#F564E3' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government debt (% of GDP) in 2021 was 69.5'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e39' cx='820.77' cy='79.18' r='2.67pt' fill='#F564E3' fill-opacity='1' stroke='#F564E3' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government debt (% of GDP) in 2022 was 71.1'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e40' cx='65.77' cy='195.15' r='2.67pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government expenditure (% of GDP) in 2010 was 30.8'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e41' cx='128.69' cy='189.97' r='2.67pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government expenditure (% of GDP) in 2011 was 32.6'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e42' cx='191.61' cy='189.11' r='2.67pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government expenditure (% of GDP) in 2012 was 32.9'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e43' cx='254.52' cy='188.24' r='2.67pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government expenditure (% of GDP) in 2013 was 33.2'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e44' cx='317.44' cy='191.7' r='2.67pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government expenditure (% of GDP) in 2014 was 32'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e45' cx='380.35' cy='186.23' r='2.67pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government expenditure (% of GDP) in 2015 was 33.9'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e46' cx='443.27' cy='189.39' r='2.67pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government expenditure (% of GDP) in 2016 was 32.8'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e47' cx='506.19' cy='188.24' r='2.67pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government expenditure (% of GDP) in 2017 was 33.2'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e48' cx='569.1' cy='189.11' r='2.67pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government expenditure (% of GDP) in 2018 was 32.9'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e49' cx='632.02' cy='199.18' r='2.67pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government expenditure (% of GDP) in 2019 was 29.4'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e50' cx='694.94' cy='163.78' r='2.67pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government expenditure (% of GDP) in 2020 was 41.7'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e51' cx='757.85' cy='188.24' r='2.67pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government expenditure (% of GDP) in 2021 was 33.2'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e52' cx='820.77' cy='189.97' r='2.67pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government expenditure (% of GDP) in 2022 was 32.6'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e53' cx='65.77' cy='202.34' r='2.67pt' fill='#00BFC4' fill-opacity='1' stroke='#00BFC4' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government revenue (% of GDP) in 2010 was 28.3'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e54' cx='128.69' cy='204.07' r='2.67pt' fill='#00BFC4' fill-opacity='1' stroke='#00BFC4' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government revenue (% of GDP) in 2011 was 27.7'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e55' cx='191.61' cy='204.07' r='2.67pt' fill='#00BFC4' fill-opacity='1' stroke='#00BFC4' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government revenue (% of GDP) in 2012 was 27.7'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e56' cx='254.52' cy='199.75' r='2.67pt' fill='#00BFC4' fill-opacity='1' stroke='#00BFC4' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government revenue (% of GDP) in 2013 was 29.2'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e57' cx='317.44' cy='202.92' r='2.67pt' fill='#00BFC4' fill-opacity='1' stroke='#00BFC4' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government revenue (% of GDP) in 2014 was 28.1'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e58' cx='380.35' cy='197.45' r='2.67pt' fill='#00BFC4' fill-opacity='1' stroke='#00BFC4' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government revenue (% of GDP) in 2015 was 30'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e59' cx='443.27' cy='199.18' r='2.67pt' fill='#00BFC4' fill-opacity='1' stroke='#00BFC4' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government revenue (% of GDP) in 2016 was 29.4'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e60' cx='506.19' cy='200.91' r='2.67pt' fill='#00BFC4' fill-opacity='1' stroke='#00BFC4' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government revenue (% of GDP) in 2017 was 28.8'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e61' cx='569.1' cy='200.91' r='2.67pt' fill='#00BFC4' fill-opacity='1' stroke='#00BFC4' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government revenue (% of GDP) in 2018 was 28.8'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e62' cx='632.02' cy='199.18' r='2.67pt' fill='#00BFC4' fill-opacity='1' stroke='#00BFC4' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government revenue (% of GDP) in 2019 was 29.4'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e63' cx='694.94' cy='204.07' r='2.67pt' fill='#00BFC4' fill-opacity='1' stroke='#00BFC4' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government revenue (% of GDP) in 2020 was 27.7'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e64' cx='757.85' cy='204.65' r='2.67pt' fill='#00BFC4' fill-opacity='1' stroke='#00BFC4' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government revenue (% of GDP) in 2021 was 27.5'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e65' cx='820.77' cy='201.77' r='2.67pt' fill='#00BFC4' fill-opacity='1' stroke='#00BFC4' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='General government revenue (% of GDP) in 2022 was 28.5'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e66' cx='65.77' cy='271.41' r='2.67pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='Inflation (CPI) (%) in 2010 was 4.3'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e67' cx='128.69' cy='269.39' r='2.67pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='Inflation (CPI) (%) in 2011 was 5'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e68' cx='191.61' cy='268.24' r='2.67pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='Inflation (CPI) (%) in 2012 was 5.4'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e69' cx='254.52' cy='267.38' r='2.67pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='Inflation (CPI) (%) in 2013 was 5.7'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e70' cx='317.44' cy='268.53' r='2.67pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='Inflation (CPI) (%) in 2014 was 5.3'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e71' cx='380.35' cy='270.54' r='2.67pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='Inflation (CPI) (%) in 2015 was 4.6'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e72' cx='443.27' cy='265.36' r='2.67pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='Inflation (CPI) (%) in 2016 was 6.4'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e73' cx='506.19' cy='268.53' r='2.67pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='Inflation (CPI) (%) in 2017 was 5.3'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e74' cx='569.1' cy='270.26' r='2.67pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='Inflation (CPI) (%) in 2018 was 4.7'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e75' cx='632.02' cy='271.98' r='2.67pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='Inflation (CPI) (%) in 2019 was 4.1'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e76' cx='694.94' cy='274.28' r='2.67pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='Inflation (CPI) (%) in 2020 was 3.3'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e77' cx='757.85' cy='269.97' r='2.67pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='Inflation (CPI) (%) in 2021 was 4.8'/>\n   <circle id='svg_70075c25_6441_4bc7_824f_8c4540654091_e78' cx='820.77' cy='263.93' r='2.67pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='Inflation (CPI) (%) in 2022 was 6.9'/>\n   <polyline points='65.77,299.03 128.69,297.59 191.61,268.82 254.52,295.29 317.44,295.00 380.35,295.00 443.27,293.56 506.19,296.15 569.10,294.43 632.02,301.91 694.94,324.07 757.85,300.18 820.77,295.87' fill='none' stroke='#F8766D' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='65.77,274.00 128.69,274.86 191.61,276.59 254.52,278.60 317.44,279.75 380.35,280.04 443.27,282.34 506.19,283.75 569.10,281.77 632.02,282.92 694.94,304.50 757.85,269.97 820.77,276.59' fill='none' stroke='#B79F00' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='65.77,271.41 128.69,269.39 191.61,268.24 254.52,267.38 317.44,268.53 380.35,270.54 443.27,265.36 506.19,268.53 569.10,270.26 632.02,271.98 694.94,274.28 757.85,269.97 820.77,263.93' fill='none' stroke='#00BA38' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='65.77,202.34 128.69,204.07 191.61,204.07 254.52,199.75 317.44,202.92 380.35,197.45 443.27,199.18 506.19,200.91 569.10,200.91 632.02,199.18 694.94,204.07 757.85,204.65 820.77,201.77' fill='none' stroke='#00BFC4' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='65.77,195.15 128.69,189.97 191.61,189.11 254.52,188.24 317.44,191.70 380.35,186.23 443.27,189.39 506.19,188.24 569.10,189.11 632.02,199.18 694.94,163.78 757.85,188.24 820.77,189.97' fill='none' stroke='#619CFF' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='65.77,209.83 128.69,187.38 191.61,163.50 254.52,183.35 317.44,166.37 380.35,154.86 443.27,152.27 506.19,130.40 569.10,123.79 632.02,106.52 694.94,52.71 757.85,83.79 820.77,79.18' fill='none' stroke='#F564E3' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt'/>\n   <text x='41.65' y='308.25' font-size='8.28pt' font-family='Helvetica' fill='#F8766D' fill-opacity='1'>-5.3<\/text>\n   <text x='133.76' y='306.83' font-size='8.28pt' font-family='Helvetica' fill='#F8766D' fill-opacity='1'>-4.8<\/text>\n   <text x='170.99' y='272.84' font-size='8.28pt' font-family='Helvetica' fill='#F8766D' fill-opacity='1'>5.2<\/text>\n   <text x='259.82' y='302.97' font-size='8.28pt' font-family='Helvetica' fill='#F8766D' fill-opacity='1'>-4<\/text>\n   <text x='293.08' y='304.27' font-size='8.28pt' font-family='Helvetica' fill='#F8766D' fill-opacity='1'>-3.9<\/text>\n   <text x='385.69' y='304.25' font-size='8.28pt' font-family='Helvetica' fill='#F8766D' fill-opacity='1'>-3.9<\/text>\n   <text x='419.08' y='302.83' font-size='8.28pt' font-family='Helvetica' fill='#F8766D' fill-opacity='1'>-3.4<\/text>\n   <text x='511.36' y='305.46' font-size='8.28pt' font-family='Helvetica' fill='#F8766D' fill-opacity='1'>-4.3<\/text>\n   <text x='574.32' y='303.61' font-size='8.28pt' font-family='Helvetica' fill='#F8766D' fill-opacity='1'>-3.7<\/text>\n   <text x='607.92' y='311.13' font-size='8.28pt' font-family='Helvetica' fill='#F8766D' fill-opacity='1'>-6.3<\/text>\n   <text x='673.54' y='332.83' font-size='8.28pt' font-family='Helvetica' fill='#F8766D' fill-opacity='1'>-14<\/text>\n   <text x='763.12' y='298.9' font-size='8.28pt' font-family='Helvetica' fill='#F8766D' fill-opacity='1'>-5.7<\/text>\n   <text x='796.49' y='305.11' font-size='8.28pt' font-family='Helvetica' fill='#F8766D' fill-opacity='1'>-4.2<\/text>\n   <text x='44.69' y='282.71' font-size='8.28pt' font-family='Helvetica' fill='#B79F00' fill-opacity='1'>3.4<\/text>\n   <text x='133.89' y='283.51' font-size='8.28pt' font-family='Helvetica' fill='#B79F00' fill-opacity='1'>3.1<\/text>\n   <text x='196.73' y='285.13' font-size='8.28pt' font-family='Helvetica' fill='#B79F00' fill-opacity='1'>2.5<\/text>\n   <text x='234.02' y='287.26' font-size='8.28pt' font-family='Helvetica' fill='#B79F00' fill-opacity='1'>1.8<\/text>\n   <text x='322.9' y='288.42' font-size='8.28pt' font-family='Helvetica' fill='#B79F00' fill-opacity='1'>1.4<\/text>\n   <text x='359.77' y='288.59' font-size='8.28pt' font-family='Helvetica' fill='#B79F00' fill-opacity='1'>1.3<\/text>\n   <text x='448.36' y='281.8' font-size='8.28pt' font-family='Helvetica' fill='#B79F00' fill-opacity='1'>0.5<\/text>\n   <text x='479.54' y='282.02' font-size='8.28pt' font-family='Helvetica' fill='#B79F00' fill-opacity='1'>0.01<\/text>\n   <text x='548.66' y='290.31' font-size='8.28pt' font-family='Helvetica' fill='#B79F00' fill-opacity='1'>0.7<\/text>\n   <text x='611.56' y='291.55' font-size='8.28pt' font-family='Helvetica' fill='#B79F00' fill-opacity='1'>0.3<\/text>\n   <text x='670.78' y='313.66' font-size='8.28pt' font-family='Helvetica' fill='#B79F00' fill-opacity='1'>-7.2<\/text>\n   <text x='737.35' y='278.6' font-size='8.28pt' font-family='Helvetica' fill='#B79F00' fill-opacity='1'>4.8<\/text>\n   <text x='825.93' y='285.23' font-size='8.28pt' font-family='Helvetica' fill='#B79F00' fill-opacity='1'>2.5<\/text>\n   <text x='38.99' y='219.52' font-size='8.28pt' font-family='Helvetica' fill='#F564E3' fill-opacity='1'>25.7<\/text>\n   <text x='101.88' y='185.56' font-size='8.28pt' font-family='Helvetica' fill='#F564E3' fill-opacity='1'>33.5<\/text>\n   <text x='196.66' y='161.71' font-size='8.28pt' font-family='Helvetica' fill='#F564E3' fill-opacity='1'>41.8<\/text>\n   <text x='259.77' y='181.63' font-size='8.28pt' font-family='Helvetica' fill='#F564E3' fill-opacity='1'>34.9<\/text>\n   <text x='322.59' y='164.69' font-size='8.28pt' font-family='Helvetica' fill='#F564E3' fill-opacity='1'>40.8<\/text>\n   <text x='385.55' y='153.09' font-size='8.28pt' font-family='Helvetica' fill='#F564E3' fill-opacity='1'>44.8<\/text>\n   <text x='416.58' y='161.94' font-size='8.28pt' font-family='Helvetica' fill='#F564E3' fill-opacity='1'>45.7<\/text>\n   <text x='511.34' y='128.67' font-size='8.28pt' font-family='Helvetica' fill='#F564E3' fill-opacity='1'>53.3<\/text>\n   <text x='574.41' y='121.95' font-size='8.28pt' font-family='Helvetica' fill='#F564E3' fill-opacity='1'>55.6<\/text>\n   <text x='605.43' y='116.2' font-size='8.28pt' font-family='Helvetica' fill='#F564E3' fill-opacity='1'>61.6<\/text>\n   <text x='668.11' y='62.41' font-size='8.28pt' font-family='Helvetica' fill='#F564E3' fill-opacity='1'>80.3<\/text>\n   <text x='731.1' y='93.43' font-size='8.28pt' font-family='Helvetica' fill='#F564E3' fill-opacity='1'>69.5<\/text>\n   <text x='794.26' y='88.82' font-size='8.28pt' font-family='Helvetica' fill='#F564E3' fill-opacity='1'>71.1<\/text>\n   <text x='38.93' y='193.37' font-size='8.28pt' font-family='Helvetica' fill='#619CFF' fill-opacity='1'>30.8<\/text>\n   <text x='134.02' y='199.69' font-size='8.28pt' font-family='Helvetica' fill='#619CFF' fill-opacity='1'>32.6<\/text>\n   <text x='196.77' y='187.42' font-size='8.28pt' font-family='Helvetica' fill='#619CFF' fill-opacity='1'>32.9<\/text>\n   <text x='227.61' y='196.09' font-size='8.28pt' font-family='Helvetica' fill='#619CFF' fill-opacity='1'>33.2<\/text>\n   <text x='299.99' y='191.52' font-size='8.28pt' font-family='Helvetica' fill='#619CFF' fill-opacity='1'>32<\/text>\n   <text x='353.71' y='184.48' font-size='8.28pt' font-family='Helvetica' fill='#619CFF' fill-opacity='1'>33.9<\/text>\n   <text x='416.64' y='187.65' font-size='8.28pt' font-family='Helvetica' fill='#619CFF' fill-opacity='1'>32.8<\/text>\n   <text x='479.34' y='186.38' font-size='8.28pt' font-family='Helvetica' fill='#619CFF' fill-opacity='1'>33.2<\/text>\n   <text x='542.49' y='187.37' font-size='8.28pt' font-family='Helvetica' fill='#619CFF' fill-opacity='1'>32.9<\/text>\n   <text x='637.61' y='197.42' font-size='8.28pt' font-family='Helvetica' fill='#619CFF' fill-opacity='1'>29.4<\/text>\n   <text x='668.37' y='173.48' font-size='8.28pt' font-family='Helvetica' fill='#619CFF' fill-opacity='1'>41.7<\/text>\n   <text x='731.26' y='197.97' font-size='8.28pt' font-family='Helvetica' fill='#619CFF' fill-opacity='1'>33.2<\/text>\n   <text x='825.84' y='188.17' font-size='8.28pt' font-family='Helvetica' fill='#619CFF' fill-opacity='1'>32.6<\/text>\n   <text x='71.63' y='206.43' font-size='8.28pt' font-family='Helvetica' fill='#00BFC4' fill-opacity='1'>28.3<\/text>\n   <text x='102.16' y='213.78' font-size='8.28pt' font-family='Helvetica' fill='#00BFC4' fill-opacity='1'>27.7<\/text>\n   <text x='196.65' y='213.69' font-size='8.28pt' font-family='Helvetica' fill='#00BFC4' fill-opacity='1'>27.7<\/text>\n   <text x='259.73' y='209.41' font-size='8.28pt' font-family='Helvetica' fill='#00BFC4' fill-opacity='1'>29.2<\/text>\n   <text x='290.93' y='212.48' font-size='8.28pt' font-family='Helvetica' fill='#00BFC4' fill-opacity='1'>28.1<\/text>\n   <text x='385.54' y='205.4' font-size='8.28pt' font-family='Helvetica' fill='#00BFC4' fill-opacity='1'>30<\/text>\n   <text x='448.55' y='208.91' font-size='8.28pt' font-family='Helvetica' fill='#00BFC4' fill-opacity='1'>29.4<\/text>\n   <text x='511.47' y='210.57' font-size='8.28pt' font-family='Helvetica' fill='#00BFC4' fill-opacity='1'>28.8<\/text>\n   <text x='574.46' y='210.65' font-size='8.28pt' font-family='Helvetica' fill='#00BFC4' fill-opacity='1'>28.8<\/text>\n   <text x='605.1' y='208.91' font-size='8.28pt' font-family='Helvetica' fill='#00BFC4' fill-opacity='1'>29.4<\/text>\n   <text x='700.27' y='202.32' font-size='8.28pt' font-family='Helvetica' fill='#00BFC4' fill-opacity='1'>27.7<\/text>\n   <text x='763.11' y='214.35' font-size='8.28pt' font-family='Helvetica' fill='#00BFC4' fill-opacity='1'>27.5<\/text>\n   <text x='793.97' y='211.53' font-size='8.28pt' font-family='Helvetica' fill='#00BFC4' fill-opacity='1'>28.5<\/text>\n   <text x='71.42' y='270.62' font-size='8.28pt' font-family='Helvetica' fill='#00BA38' fill-opacity='1'>4.3<\/text>\n   <text x='117.4' y='270.42' font-size='8.28pt' font-family='Helvetica' fill='#00BA38' fill-opacity='1'>5<\/text>\n   <text x='197.15' y='267.49' font-size='8.28pt' font-family='Helvetica' fill='#00BA38' fill-opacity='1'>5.4<\/text>\n   <text x='259.8' y='266.62' font-size='8.28pt' font-family='Helvetica' fill='#00BA38' fill-opacity='1'>5.7<\/text>\n   <text x='296.83' y='267.75' font-size='8.28pt' font-family='Helvetica' fill='#00BA38' fill-opacity='1'>5.3<\/text>\n   <text x='385.66' y='269.84' font-size='8.28pt' font-family='Helvetica' fill='#00BA38' fill-opacity='1'>4.6<\/text>\n   <text x='422.43' y='264.6' font-size='8.28pt' font-family='Helvetica' fill='#00BA38' fill-opacity='1'>6.4<\/text>\n   <text x='511.31' y='267.81' font-size='8.28pt' font-family='Helvetica' fill='#00BA38' fill-opacity='1'>5.3<\/text>\n   <text x='574.31' y='269.67' font-size='8.28pt' font-family='Helvetica' fill='#00BA38' fill-opacity='1'>4.7<\/text>\n   <text x='611.19' y='271.24' font-size='8.28pt' font-family='Helvetica' fill='#00BA38' fill-opacity='1'>4.1<\/text>\n   <text x='700.13' y='273.62' font-size='8.28pt' font-family='Helvetica' fill='#00BA38' fill-opacity='1'>3.3<\/text>\n   <text x='763.8' y='269.21' font-size='8.28pt' font-family='Helvetica' fill='#00BA38' fill-opacity='1'>4.8<\/text>\n   <text x='800.17' y='263.24' font-size='8.28pt' font-family='Helvetica' fill='#00BA38' fill-opacity='1'>6.9<\/text>\n   <rect x='28.02' y='39.14' width='830.5' height='298.5' fill='none' stroke='#B3B3B3' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='round'/>\n  <\/g>\n  <g clip-path='url(#svg_70075c25_6441_4bc7_824f_8c4540654091_c1)'>\n   <text x='10.38' y='286.93' font-size='6.6pt' font-family='Helvetica' fill='#4D4D4D' fill-opacity='1'>0%<\/text>\n   <text x='5.48' y='229.38' font-size='6.6pt' font-family='Helvetica' fill='#4D4D4D' fill-opacity='1'>20%<\/text>\n   <text x='5.48' y='171.83' font-size='6.6pt' font-family='Helvetica' fill='#4D4D4D' fill-opacity='1'>40%<\/text>\n   <text x='5.48' y='114.28' font-size='6.6pt' font-family='Helvetica' fill='#4D4D4D' fill-opacity='1'>60%<\/text>\n   <text x='5.48' y='56.72' font-size='6.6pt' font-family='Helvetica' fill='#4D4D4D' fill-opacity='1'>80%<\/text>\n   <polyline points='25.28,283.78 28.02,283.78' fill='none' stroke='#B3B3B3' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='25.28,226.23 28.02,226.23' fill='none' stroke='#B3B3B3' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='25.28,168.68 28.02,168.68' fill='none' stroke='#B3B3B3' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='25.28,111.12 28.02,111.12' fill='none' stroke='#B3B3B3' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='25.28,53.57 28.02,53.57' fill='none' stroke='#B3B3B3' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='65.77,340.38 65.77,337.64' fill='none' stroke='#B3B3B3' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='128.69,340.38 128.69,337.64' fill='none' stroke='#B3B3B3' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='191.61,340.38 191.61,337.64' fill='none' stroke='#B3B3B3' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='254.52,340.38 254.52,337.64' fill='none' stroke='#B3B3B3' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='317.44,340.38 317.44,337.64' fill='none' stroke='#B3B3B3' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='380.35,340.38 380.35,337.64' fill='none' stroke='#B3B3B3' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='443.27,340.38 443.27,337.64' fill='none' stroke='#B3B3B3' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='506.19,340.38 506.19,337.64' fill='none' stroke='#B3B3B3' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='569.10,340.38 569.10,337.64' fill='none' stroke='#B3B3B3' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='632.02,340.38 632.02,337.64' fill='none' stroke='#B3B3B3' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='694.94,340.38 694.94,337.64' fill='none' stroke='#B3B3B3' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='757.85,340.38 757.85,337.64' fill='none' stroke='#B3B3B3' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='820.77,340.38 820.77,337.64' fill='none' stroke='#B3B3B3' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <text x='55.98' y='348.87' font-size='6.6pt' font-family='Helvetica' fill='#4D4D4D' fill-opacity='1'>2010<\/text>\n   <text x='118.9' y='348.87' font-size='6.6pt' font-family='Helvetica' fill='#4D4D4D' fill-opacity='1'>2011<\/text>\n   <text x='181.81' y='348.87' font-size='6.6pt' font-family='Helvetica' fill='#4D4D4D' fill-opacity='1'>2012<\/text>\n   <text x='244.73' y='348.87' font-size='6.6pt' font-family='Helvetica' fill='#4D4D4D' fill-opacity='1'>2013<\/text>\n   <text x='307.65' y='348.87' font-size='6.6pt' font-family='Helvetica' fill='#4D4D4D' fill-opacity='1'>2014<\/text>\n   <text x='370.56' y='348.87' font-size='6.6pt' font-family='Helvetica' fill='#4D4D4D' fill-opacity='1'>2015<\/text>\n   <text x='433.48' y='348.87' font-size='6.6pt' font-family='Helvetica' fill='#4D4D4D' fill-opacity='1'>2016<\/text>\n   <text x='496.4' y='348.87' font-size='6.6pt' font-family='Helvetica' fill='#4D4D4D' fill-opacity='1'>2017<\/text>\n   <text x='559.31' y='348.87' font-size='6.6pt' font-family='Helvetica' fill='#4D4D4D' fill-opacity='1'>2018<\/text>\n   <text x='622.23' y='348.87' font-size='6.6pt' font-family='Helvetica' fill='#4D4D4D' fill-opacity='1'>2019<\/text>\n   <text x='685.15' y='348.87' font-size='6.6pt' font-family='Helvetica' fill='#4D4D4D' fill-opacity='1'>2020<\/text>\n   <text x='748.06' y='348.87' font-size='6.6pt' font-family='Helvetica' fill='#4D4D4D' fill-opacity='1'>2021<\/text>\n   <text x='810.98' y='348.87' font-size='6.6pt' font-family='Helvetica' fill='#4D4D4D' fill-opacity='1'>2022<\/text>\n   <rect x='162.71' y='361.78' width='561.12' height='51' fill='#FFFFFF' fill-opacity='1' stroke='none'/>\n   <text x='168.19' y='391.23' font-size='8.25pt' font-family='Helvetica'>Key<\/text>\n   <rect x='192.63' y='367.26' width='17.28' height='17.28' fill='#FFFFFF' fill-opacity='1' stroke='none'/>\n   <circle cx='201.27' cy='375.9' r='2.67pt' fill='#F564E3' fill-opacity='1' stroke='#F564E3' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round'/>\n   <line x1='194.36' y1='375.9' x2='208.18' y2='375.9' stroke='#F564E3' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt'/>\n   <rect x='192.63' y='390.02' width='17.28' height='17.28' fill='#FFFFFF' fill-opacity='1' stroke='none'/>\n   <circle cx='201.27' cy='398.66' r='2.67pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round'/>\n   <line x1='194.36' y1='398.66' x2='208.18' y2='398.66' stroke='#619CFF' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt'/>\n   <rect x='396.92' y='367.26' width='17.28' height='17.28' fill='#FFFFFF' fill-opacity='1' stroke='none'/>\n   <circle cx='405.56' cy='375.9' r='2.67pt' fill='#00BFC4' fill-opacity='1' stroke='#00BFC4' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round'/>\n   <line x1='398.65' y1='375.9' x2='412.47' y2='375.9' stroke='#00BFC4' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt'/>\n   <rect x='396.92' y='390.02' width='17.28' height='17.28' fill='#FFFFFF' fill-opacity='1' stroke='none'/>\n   <circle cx='405.56' cy='398.66' r='2.67pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round'/>\n   <line x1='398.65' y1='398.66' x2='412.47' y2='398.66' stroke='#00BA38' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt'/>\n   <rect x='587.03' y='367.26' width='17.28' height='17.28' fill='#FFFFFF' fill-opacity='1' stroke='none'/>\n   <circle cx='595.67' cy='375.9' r='2.67pt' fill='#B79F00' fill-opacity='1' stroke='#B79F00' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round'/>\n   <line x1='588.76' y1='375.9' x2='602.58' y2='375.9' stroke='#B79F00' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt'/>\n   <rect x='587.03' y='390.02' width='17.28' height='17.28' fill='#FFFFFF' fill-opacity='1' stroke='none'/>\n   <circle cx='595.67' cy='398.66' r='2.67pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round'/>\n   <line x1='588.76' y1='398.66' x2='602.58' y2='398.66' stroke='#F8766D' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt'/>\n   <text x='215.39' y='379.06' font-size='6.6pt' font-family='Helvetica'>General government debt (% of GDP)<\/text>\n   <text x='215.39' y='401.82' font-size='6.6pt' font-family='Helvetica'>General government expenditure (% of GDP)<\/text>\n   <text x='419.68' y='379.06' font-size='6.6pt' font-family='Helvetica'>General government revenue (% of GDP)<\/text>\n   <text x='419.68' y='401.82' font-size='6.6pt' font-family='Helvetica'>Inflation (CPI) (%)<\/text>\n   <text x='609.79' y='379.06' font-size='6.6pt' font-family='Helvetica'>GDP growth (%)<\/text>\n   <text x='609.79' y='401.82' font-size='6.6pt' font-family='Helvetica'>Budget balance (% of GDP)<\/text>\n   <text x='28.02' y='31.23' font-size='8.25pt' font-family='Helvetica'>2010-2022<\/text>\n   <text x='28.02' y='14.94' font-size='9.9pt' font-family='Helvetica'>Selected series from Budget Reviews and Budget Speeches<\/text>\n   <text x='696.17' y='424.57' font-size='6.6pt' font-family='Helvetica'>Source: National Treasury of South Africa<\/text>\n  <\/g>\n <\/g>\n<\/svg>","js":null,"uid":"svg_70075c25_6441_4bc7_824f_8c4540654091","ratio":2,"settings":{"tooltip":{"css":".tooltip_SVGID_ { padding:5px;background:black;color:white;border-radius:2px;text-align:left; ; position:absolute;pointer-events:none;z-index:999;}","placement":"doc","opacity":0.9,"offx":10,"offy":10,"use_cursor_pos":true,"use_fill":false,"use_stroke":false,"delay_over":200,"delay_out":500},"hover":{"css":".hover_data_SVGID_ { fill:orange;stroke:black;cursor:pointer; }\ntext.hover_data_SVGID_ { stroke:none;fill:orange; }\ncircle.hover_data_SVGID_ { fill:orange;stroke:black; }\nline.hover_data_SVGID_, polyline.hover_data_SVGID_ { fill:none;stroke:orange; }\nrect.hover_data_SVGID_, polygon.hover_data_SVGID_, path.hover_data_SVGID_ { fill:orange;stroke:none; }\nimage.hover_data_SVGID_ { stroke:orange; }","reactive":true,"nearest_distance":null},"hover_inv":{"css":""},"hover_key":{"css":".hover_key_SVGID_ { fill:orange;stroke:black;cursor:pointer; }\ntext.hover_key_SVGID_ { stroke:none;fill:orange; }\ncircle.hover_key_SVGID_ { fill:orange;stroke:black; }\nline.hover_key_SVGID_, polyline.hover_key_SVGID_ { fill:none;stroke:orange; }\nrect.hover_key_SVGID_, polygon.hover_key_SVGID_, path.hover_key_SVGID_ { fill:orange;stroke:none; }\nimage.hover_key_SVGID_ { stroke:orange; }","reactive":true},"hover_theme":{"css":".hover_theme_SVGID_ { fill:orange;stroke:black;cursor:pointer; }\ntext.hover_theme_SVGID_ { stroke:none;fill:orange; }\ncircle.hover_theme_SVGID_ { fill:orange;stroke:black; }\nline.hover_theme_SVGID_, polyline.hover_theme_SVGID_ { fill:none;stroke:orange; }\nrect.hover_theme_SVGID_, polygon.hover_theme_SVGID_, path.hover_theme_SVGID_ { fill:orange;stroke:none; }\nimage.hover_theme_SVGID_ { stroke:orange; }","reactive":true},"select":{"css":".select_data_SVGID_ { fill:red;stroke:black;cursor:pointer; }\ntext.select_data_SVGID_ { stroke:none;fill:red; }\ncircle.select_data_SVGID_ { fill:red;stroke:black; }\nline.select_data_SVGID_, polyline.select_data_SVGID_ { fill:none;stroke:red; }\nrect.select_data_SVGID_, polygon.select_data_SVGID_, path.select_data_SVGID_ { fill:red;stroke:none; }\nimage.select_data_SVGID_ { stroke:red; }","type":"multiple","only_shiny":true,"selected":[]},"select_inv":{"css":""},"select_key":{"css":".select_key_SVGID_ { fill:red;stroke:black;cursor:pointer; }\ntext.select_key_SVGID_ { stroke:none;fill:red; }\ncircle.select_key_SVGID_ { fill:red;stroke:black; }\nline.select_key_SVGID_, polyline.select_key_SVGID_ { fill:none;stroke:red; }\nrect.select_key_SVGID_, polygon.select_key_SVGID_, path.select_key_SVGID_ { fill:red;stroke:none; }\nimage.select_key_SVGID_ { stroke:red; }","type":"single","only_shiny":true,"selected":[]},"select_theme":{"css":".select_theme_SVGID_ { fill:red;stroke:black;cursor:pointer; }\ntext.select_theme_SVGID_ { stroke:none;fill:red; }\ncircle.select_theme_SVGID_ { fill:red;stroke:black; }\nline.select_theme_SVGID_, polyline.select_theme_SVGID_ { fill:none;stroke:red; }\nrect.select_theme_SVGID_, polygon.select_theme_SVGID_, path.select_theme_SVGID_ { fill:red;stroke:none; }\nimage.select_theme_SVGID_ { stroke:red; }","type":"single","only_shiny":true,"selected":[]},"zoom":{"min":1,"max":1,"duration":300},"toolbar":{"position":"topright","pngname":"diagram","tooltips":null,"fixed":false,"hidden":[],"delay_over":200,"delay_out":500},"sizing":{"rescale":true,"width":1}}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
</section>
<section id="what-do-we-learn" class="level2">
<h2 class="anchored" data-anchor-id="what-do-we-learn">What do we learn?</h2>
<p>There are some missing values, particularly in the series <code>GDP (current ZAR[billions])</code> and <code>Budget balance (% of GDP)</code>.</p>
<p>In addition, in 2019, the government expenditure figure is incorectly plucked from the PDF document as 29.40% of GDP, when in reality, this was 35.70% of GDP. This is a significant error, and it is not clear why this happened. It is possible that the PDF document was not correctly parsed, or that the OpenAI API made an error extracting this value from the text chunk.</p>
<p>In order to overcome these kinds of errors, experimenting with multiple pipelines and chunk sizes is probably the best way to go. This was just a demonstration, and there is certainly a possiblity to make the pipline more robust and less error prone.</p>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>Though we have used budget data from South Africa in this case, the same approach can be used for any kind of data. LangChain has document loaders for text, PDF, and HTML, and can be used to extract information from many kinds of document.</p>


<!-- -->

</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>There are ideosyncracies between each year that mean ingesting this data into a tidy format is time consuming<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/interludeone\.com\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb1" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Transforming National Budget Documents into Queryable Knowledge"</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="an">description:</span><span class="co"> |</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">  A post about automating the data retrieval process from PDF documents using LangChain and the OpenAI API.</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="an">image:</span><span class="co"> preview.png</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co">  - name: Jonathan Jayes</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> 2023-07-05</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co">    page-layout: full</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="fu">## The challenge</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>One of the claims of generative AI is that it will free humans from labourious tasks which are currently tedious to do manually and challenging to automate. In this article, we'll explore how we can use <span class="co">[</span><span class="ot">LangChain</span><span class="co">](https://python.langchain.com/docs/get_started/introduction.html)</span> to automate the process of extracting information from PDF documents.</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>The National Treasury in South Africa produces a fantastically informative budget review each year. It includes headline figures like GDP growth, inflation, revenue and expenditure, as well as more detailed information about the budget for each government department. In addition, the budget speech is delivered by the Minister of Finance, and contains a wealth of information about the budget, including the government's priorities for the year, and the reasoning behind the budget allocations. </span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>If we want to get specific information from these documents, we can read through them and extract the information manually, searching for specific terms with the <span class="in">`control + F`</span> functionality. This is a time consuming process, and it's easy to make mistakes. What if we could ask a computer to do it for us?</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>:::{.callout-note}</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>There are, in addition to the PDF documents a series of excel files that National Treasury releases too. These files do contain the information that we want, but are not in an easily machine readable format.^<span class="co">[</span><span class="ot">There are ideosyncracies between each year that mean ingesting this data into a tidy format is time consuming</span><span class="co">]</span> Useful tools like <span class="co">[</span><span class="ot">EconData</span><span class="co">](https://codera.co.za/econdata/)</span> from <span class="co">[</span><span class="ot">Codera Analytics</span><span class="co">](https://codera.co.za/)</span> make it much easier to access this data programatically.</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="fu">## The solution: a vector database and a Large Language Model</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>LangChain is a framework that allows us to connect a large language model to our own data. In this case, it allows to transform the South African National Budget Reviews and Budget Speeches into an interactive, queryable knowledge base. The final output in this case is a table of summary statistics that would have taken a human hours to compile, but which we can now generate in seconds.</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>In essence, to transform budget documents into a queryable database, we read in the PDFs, segment them into chunks, and store the text in a database. To query this database, we use a simple similarity calculation to find the most relevant chunks of text, which are then fed to a large language model to answer our questions.</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>Here is a diagram of the process:</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>:::{.column-page}</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a><span class="in">```{mermaid}</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a><span class="in">graph LR</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a><span class="in">    A((Budget Documents PDF)) --&gt;|Chunking&lt;br&gt;Vectorization| B{Chroma DB}</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a><span class="in">    C[User Query] --&gt;|Vectorization| D{Chroma DB}</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a><span class="in">    D --&gt; E[Top-n Similar Chunks]</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a><span class="in">    E --&gt; F{Large Language &lt;br&gt;Model Context Window}</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a><span class="in">    F --&gt; G((Answer))</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a><span class="in">    style A fill:#ece7f2,stroke:#333,stroke-width:2px</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a><span class="in">    style B fill:#a6bddb,stroke:#333,stroke-width:2px</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a><span class="in">    style C fill:#ece7f2,stroke:#333,stroke-width:2px</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a><span class="in">    style D fill:#a6bddb,stroke:#333,stroke-width:2px</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a><span class="in">    style E fill:#2b8cbe,stroke:#333,stroke-width:2px</span></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a><span class="in">    style F fill:#a6bddb,stroke:#333,stroke-width:2px</span></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a><span class="in">    style G fill:#2b8cbe,stroke:#333,stroke-width:2px</span></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a><span class="fu">## An example: what was Consumer Price Inflation in 2022?</span></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>Say for instance that we want to know what Consumer Price Inflation was in 2022 in South Africa. We can ask the question in a natural language query, and the system will return the answer. Here is the query and the answer, along with the source documents that the system used to answer the question:</span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>| Query                           | Result | Source documents                                                                                                                                                                                                                                                                                                                                                                                      |</span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>|---------------------------------|--------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|</span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>| What was Consumer Price Index inflation in 2022? | 6.9%   | Document(page_content=to moderate in 2023, before rising gradually over the medium term . \nInflation  \nHeadline inflation peaked in the third quarter and averaged 6.9  per cent during 2022 . \nInflation is projected  is estimated  to ease to 5.3 per cent in 2023. Global crude oil and \ndomestic food prices remain sources of inflationary pressure. Electricity prices have been \nrevised up by 4.6 per cent over the medium term compared to the 2022 MTBPS and are', metadata={'source': 'c:<span class="sc">\\</span>Users<span class="sc">\\</span>User<span class="sc">\\</span>Documents<span class="sc">\\</span>Recon<span class="sc">\\</span>langchain-budget-speech-demo<span class="sc">\\</span>budget-documents<span class="sc">\\</span>budget-review-2023.pdf', 'page': 39}),</span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>|                                 |        | Document(page_content='CHAPTER 1 NAVIGATING AN UNEVEN ECONOMIC RECOVERY Real percentage growth 2022 2023 2024 2025 Estimate Forecast Household consumption 2.8 1.0 1.5 1.8 Gross fixed-capital formation 4.2 1.3 3.8 3.5 Exports 8.8 1.0 2.2 2.9 Imports 14.0 1.1 2.3 2.9 Real GDP growth 2.5 0.9 1.5 1.8 Consumer price index (CPI) inflation 6.9 5.3 4.9 4.7 Current account balance (% of GDP) -0.4 -1.8 -2.0 -2.1 ', metadata={'source': 'c:<span class="sc">\\</span>Users<span class="sc">\\</span>User<span class="sc">\\</span>Documents<span class="sc">\\</span>Recon<span class="sc">\\</span>langchain-budget-speech-demo<span class="sc">\\</span>budget-documents<span class="sc">\\</span>budget-review-2023.pdf', 'page': 27}), |</span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>In the table above, we can see two of the chunks of text that are most similar in terms of content to our query, from the ChromaDB database that contains the 2023 Budget Review and Budget Speech broken into 2000 token chunks. The first chunk in our table is from page 39 of the budget review, and the second chunk is from page 27. Both of these chunks contain the information that we are looking for, and the system has correctly identified them as the most relevant chunks.</span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>These chunks are then passed to the OpenAI GPT-3.5 large language model, which is able to take in the question and the context, and then return to us the answer. In this case, the answer is 6.9%, which is correct, as we can see in the table from the budget review below (which is the same as the second source document in the markdown table above).</span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a><span class="al">![Screenshot of table from 2023 Budget Review](macro_outlook.png)</span></span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a><span class="fu">## What is going on in the background?</span></span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>You can have a look at my <span class="co">[</span><span class="ot">GitHub repository</span><span class="co">](https://github.com/j-jayes/langchain-budget-speech-demo/blob/main/langchain-budget-documents-demo.ipynb)</span> for the full code, but I'll walk through the main steps here.</span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**Set Up:**  The first step is to set up LangChain using an OpenAI key. This example uses OpenAI for both the language model and the embeddings. </span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>**Load Documents:**  LangChain can load multiple documents at once. In this example, PDF files containing the 2023 budget review and 2023 budget speech are loaded.</span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>**Split Data:**  The data is then split into chunks. Each chunk corresponds to a portion of information from a specific page of the budget documents. </span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>**Create a Database:**  A vector store database is created to store and index the document embeddings, which are vector representations of the text chunks. The embeddings are generated using OpenAI and stored in a database using a tool named ChromaDB. </span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a><span class="ss">5. </span>**Retrieve Relevant Documents:**  A retriever is then set up to query the vector database and return relevant documents. The number of documents returned can be adjusted according to the user's needs. In this case, I used fewer chunks with larger number of tokens per chunk compared to the default as it worked best.</span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a><span class="ss">6. </span>**Language Model Chain:**  After setting up the retriever, a retrieval-question-answering chain is created using OpenAI. This chain is capable of answering queries based on the contents of the chunks that are passed to it, depending on the words in the query.</span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a><span class="ss">7. </span>**Format Output:**  A function is created to present the results and source documents neatly. This is what we show in the markdown table above.</span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a><span class="ss">8. </span>**Querying:**  The system is now ready for queries. A query is input and the system returns the most relevant response based on the indexed documents. In this case, we worked through each years' budget documents from 2010 to 2022 to find values for seven data series.</span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a>Have a look at the output in the table below.</span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page</span></span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a>df <span class="ot">=</span> readxl<span class="sc">::</span><span class="fu">read_xlsx</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"posts"</span>, <span class="st">"2023-07-05-langchain-demo"</span>, <span class="st">"demo-table.xlsx"</span>))</span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> </span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a>    <span class="co"># mutate across not Key column readr::parse_number</span></span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="sc">!</span>Key, readr<span class="sc">::</span>parse_number)) <span class="sc">%&gt;%</span></span>
<span id="cb1-105"><a href="#cb1-105" aria-hidden="true" tabindex="-1"></a>    <span class="co"># round to 2 decimal place</span></span>
<span id="cb1-106"><a href="#cb1-106" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="sc">!</span>Key, round, <span class="dv">2</span>))</span>
<span id="cb1-107"><a href="#cb1-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-108"><a href="#cb1-108" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span></span>
<span id="cb1-109"><a href="#cb1-109" aria-hidden="true" tabindex="-1"></a>    <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb1-110"><a href="#cb1-110" aria-hidden="true" tabindex="-1"></a>    <span class="co"># missing values as ""</span></span>
<span id="cb1-111"><a href="#cb1-111" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sub_missing</span>(<span class="at">missing_text =</span> <span class="st">""</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-112"><a href="#cb1-112" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Selected series from Budget Reviews and Budget Speeches (2010-2022)"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-113"><a href="#cb1-113" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_source_note</span>(<span class="st">"Source: National Treasury of South Africa"</span>)</span>
<span id="cb1-114"><a href="#cb1-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-115"><a href="#cb1-115" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-116"><a href="#cb1-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-117"><a href="#cb1-117" aria-hidden="true" tabindex="-1"></a><span class="fu">## Visualising the data</span></span>
<span id="cb1-118"><a href="#cb1-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-119"><a href="#cb1-119" aria-hidden="true" tabindex="-1"></a>We can also make a plot of our selected series. Mouse over the points to see the exact values.</span>
<span id="cb1-120"><a href="#cb1-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-121"><a href="#cb1-121" aria-hidden="true" tabindex="-1"></a>:::{.column-page}</span>
<span id="cb1-122"><a href="#cb1-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-125"><a href="#cb1-125" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb1-126"><a href="#cb1-126" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 12</span></span>
<span id="cb1-127"><a href="#cb1-127" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb1-128"><a href="#cb1-128" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb1-129"><a href="#cb1-129" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggrepel)</span>
<span id="cb1-130"><a href="#cb1-130" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggiraph)</span>
<span id="cb1-131"><a href="#cb1-131" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_light</span>())</span>
<span id="cb1-132"><a href="#cb1-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-133"><a href="#cb1-133" aria-hidden="true" tabindex="-1"></a>legend_order <span class="ot">=</span> df <span class="sc">%&gt;%</span> </span>
<span id="cb1-134"><a href="#cb1-134" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>Key, <span class="at">names_to =</span> <span class="st">"year"</span>, <span class="at">values_to =</span> <span class="st">"value"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year <span class="sc">==</span> <span class="fu">max</span>(year)) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(value) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Key)</span>
<span id="cb1-135"><a href="#cb1-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-136"><a href="#cb1-136" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb1-137"><a href="#cb1-137" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>Key, <span class="at">names_to =</span> <span class="st">"year"</span>, <span class="at">values_to =</span> <span class="st">"value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-138"><a href="#cb1-138" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Key =</span> <span class="fu">factor</span>(Key, <span class="at">levels =</span> legend_order)) <span class="sc">%&gt;%</span></span>
<span id="cb1-139"><a href="#cb1-139" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(Key <span class="sc">!=</span> <span class="st">"GDP (current ZAR[billions])"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-140"><a href="#cb1-140" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, value, <span class="at">colour =</span> Key, <span class="at">group =</span> Key)) <span class="sc">+</span></span>
<span id="cb1-141"><a href="#cb1-141" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">"grey"</span>, <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">cex =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb1-142"><a href="#cb1-142" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point_interactive</span>(<span class="fu">aes</span>(<span class="at">tooltip =</span> <span class="fu">str_c</span>(Key, <span class="st">" in "</span>, year, <span class="st">" was "</span>, value)), <span class="at">cex =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb1-143"><a href="#cb1-143" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line_interactive</span>() <span class="sc">+</span></span>
<span id="cb1-144"><a href="#cb1-144" aria-hidden="true" tabindex="-1"></a>    <span class="co"># reverse legend order</span></span>
<span id="cb1-145"><a href="#cb1-145" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_colour_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_legend</span>(<span class="at">reverse =</span> <span class="cn">TRUE</span>)) <span class="sc">+</span></span>
<span id="cb1-146"><a href="#cb1-146" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(<span class="at">scale =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb1-147"><a href="#cb1-147" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text_repel_interactive</span>(<span class="fu">aes</span>(<span class="at">label =</span> value), <span class="at">show.legend =</span> F) <span class="sc">+</span></span>
<span id="cb1-148"><a href="#cb1-148" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Selected series from Budget Reviews and Budget Speeches"</span>,</span>
<span id="cb1-149"><a href="#cb1-149" aria-hidden="true" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="st">"2010-2022"</span>,</span>
<span id="cb1-150"><a href="#cb1-150" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">"Source: National Treasury of South Africa"</span>,</span>
<span id="cb1-151"><a href="#cb1-151" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb1-152"><a href="#cb1-152" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb1-153"><a href="#cb1-153" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb1-154"><a href="#cb1-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-155"><a href="#cb1-155" aria-hidden="true" tabindex="-1"></a><span class="fu">girafe</span>(<span class="at">ggobj =</span> g)</span>
<span id="cb1-156"><a href="#cb1-156" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-157"><a href="#cb1-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-158"><a href="#cb1-158" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb1-159"><a href="#cb1-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-160"><a href="#cb1-160" aria-hidden="true" tabindex="-1"></a><span class="fu">## What do we learn?</span></span>
<span id="cb1-161"><a href="#cb1-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-162"><a href="#cb1-162" aria-hidden="true" tabindex="-1"></a>There are some missing values, particularly in the series <span class="in">`GDP (current ZAR[billions])`</span> and <span class="in">`Budget balance (% of GDP)`</span>.</span>
<span id="cb1-163"><a href="#cb1-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-164"><a href="#cb1-164" aria-hidden="true" tabindex="-1"></a>In addition, in 2019, the government expenditure figure is incorectly plucked from the PDF document as 29.40% of GDP, when in reality, this was 35.70% of GDP. This is a significant error, and it is not clear why this happened. It is possible that the PDF document was not correctly parsed, or that the OpenAI API made an error extracting this value from the text chunk.</span>
<span id="cb1-165"><a href="#cb1-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-166"><a href="#cb1-166" aria-hidden="true" tabindex="-1"></a>In order to overcome these kinds of errors, experimenting with multiple pipelines and chunk sizes is probably the best way to go. This was just a demonstration, and there is certainly a possiblity to make the pipline more robust and less error prone. </span>
<span id="cb1-167"><a href="#cb1-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-168"><a href="#cb1-168" aria-hidden="true" tabindex="-1"></a><span class="fu">## Conclusion</span></span>
<span id="cb1-169"><a href="#cb1-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-170"><a href="#cb1-170" aria-hidden="true" tabindex="-1"></a>Though we have used budget data from South Africa in this case, the same approach can be used for any kind of data. LangChain has document loaders for text, PDF, and HTML, and can be used to extract information from many kinds of document.</span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>